{"version":3,"sources":["CountyInfoLine.js","CountyInfo.js","charts.js","MapChart.js","index.js"],"names":["CasesLine","_ref","rec","key","react_default","a","createElement","date","substring","newcountconfirmed","newcountdeaths","totalcountconfirmed","totalcountdeaths","HospitalizationsLine","_ref2","total_patients","hospitalized_covid_confirmed_patients","hospitalized_covid_suspected_patients","todays_date","parseInt","all_hospital_beds","icu_covid_confirmed_patients","icu_covid_suspected_patients","icu_available_beds","HomelessLine","_ref3","rooms","rooms_occupied","trailers_requested","trailers_delivered","donated_trailers_delivered","SurgeFacLine","_ref4","type_of_facility","status","beds_ready_to_accept_patients","patients_in_beds","beds_in_warm_status","CountyInfoLine","_ref5","name","CountyInfoLine_CasesLine","CountyInfoLine_HospitalizationsLine","CountyInfoLine_HomelessLine","CountyInfoLine_SurgeFacLine","CountyInfo","chart","countyInfo","Fragment","className","county","Parser","thead","records","map","record","src_CountyInfoLine","charts","cases","title","url","hospitalizations","homeless","surgeFac","memo","setTooltipContent","_useState","useState","_useState2","Object","slicedToArray","setChart","_useState3","_useState4","setCountyInfo","console","log","class","onClick","style","fontSize","index_umd","data-tip","projection","projectionConfig","rotate","scale","width","height","geography","geographies","geo","rsmKey","fill","stroke","strokeWidth","onMouseEnter","NAME","properties","concat","onMouseLeave","fetch","then","response","json","data","sortedData","result","sort","b","handleClickCounty","default","outline","hover","pressed","src_CountyInfo","App","content","setContent","src_MapChart","index_es","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.be75543c.chunk.js","sourcesContent":["import React from \"react\";\n\nconst CasesLine = ({ rec, key }) => {\n  return (\n    <tr>\n      <td>{rec.date.substring(0, 10)}</td>\n      <td>{rec.newcountconfirmed || \"none\"}</td>\n      <td>{rec.newcountdeaths || \"none\"}</td>\n      <td>{~~rec.totalcountconfirmed || \"none\"}</td>\n      <td>{~~rec.totalcountdeaths || \"none\"}</td>\n    </tr>\n  );\n};\n\nconst HospitalizationsLine = ({ rec, key }) => {\n  let total_patients = 0;\n  if (rec.hospitalized_covid_confirmed_patients) {\n    total_patients += rec.hospitalized_covid_confirmed_patients;\n  }\n  if (rec.hospitalized_covid_suspected_patients) {\n    total_patients += rec.hospitalized_covid_suspected_patients;\n  }\n  return (\n    <tr>\n      <td>{rec.todays_date.substring(0, 10)}</td>\n      <td>{parseInt(rec.hospitalized_covid_confirmed_patients) || \"none\"}</td>\n      <td>{parseInt(rec.hospitalized_covid_suspected_patients) || \"none\"}</td>\n      <td>{parseInt(total_patients)}</td>\n      <td>{parseInt(rec.all_hospital_beds) || \"none\"}</td>\n      <td>{parseInt(rec.icu_covid_confirmed_patients) || \"none\"}</td>\n      <td>{parseInt(rec.icu_covid_suspected_patients) || \"none\"}</td>\n      <td>{parseInt(rec.icu_available_beds) || \"none\"}</td>\n    </tr>\n  );\n};\n\nconst HomelessLine = ({ rec, key }) => {\n  return (\n    <tr>\n      <td>{rec.date.substring(0, 10)}</td>\n      <td>{rec.rooms || \"none\"}</td>\n      <td>{rec.rooms_occupied || \"none\"}</td>\n      <td>{rec.trailers_requested || \"none\"}</td>\n      <td>{rec.trailers_delivered || \"none\"}</td>\n      <td>{rec.donated_trailers_delivered || \"none\"}</td>\n    </tr>\n  );\n};\n\nconst SurgeFacLine = ({ rec, key }) => {\n  return (\n    <tr>\n      <td>{rec.date.substring(0, 10)}</td>\n      <td>{rec.type_of_facility}</td>\n      <td>{rec.status}</td>\n      <td>{rec.beds_ready_to_accept_patients || \"none\"}</td>\n      <td>{rec.patients_in_beds || \"none\"}</td>\n      <td>{rec.beds_in_warm_status || \"none\"}</td>\n    </tr>\n  );\n};\n\nconst CountyInfoLine = ({ name, rec, key }) => {\n  //  why can I not put the component name into a variable??  e.g.\n  const LineName = \"HomelessLine\";\n  if (name === \"cases\") {\n    return <CasesLine rec={rec} key={key} />;\n  }\n  if (name === \"hospitalizations\") {\n    return <HospitalizationsLine rec={rec} key={key} />;\n  }\n  if (name === \"homeless\") {\n    return <HomelessLine rec={rec} key={key} />;\n  }\n  if (name === \"surgeFac\") {\n    return <SurgeFacLine rec={rec} key={key} />;\n  }\n};\n\nexport default CountyInfoLine;\n","import React from \"react\";\nimport Parser from \"html-react-parser\";\nimport CountyInfoLine from \"./CountyInfoLine\";\n\nconst CountyInfo = ({ chart, countyInfo }) => {\n  if (countyInfo === null) {\n    return <p>no county</p>;\n  }\n  var key = 0;\n  return (\n    <>\n      <div className=\"countyInfo\">\n        <h4>{countyInfo.county}</h4>\n        <div className=\"countyTableWrap\">\n          <table>\n            {Parser(chart.thead)}\n            <tbody>\n              {countyInfo.records.map((record) => {\n                key++;\n                return (\n                  <CountyInfoLine name={chart.name} rec={record} key={key} />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CountyInfo;\n\n/*\n<CountyInfoLine key={key} rec={record} tline={chart.tline} />\n\n*/\n","const charts = {\n  cases: {\n    name: \"cases\",\n    title: \"Cases by County\",\n    url: `https://data.ca.gov/api/3/action/datastore_search_sql?sql=SELECT * from \"926fd08f-cc91-4828-af38-bd45de97f8c3\"`,\n    thead: `<thead><tr><th>Date</th><th>New<br />Cases</th><th>New<br />Deaths</th><th>Total<br />Cases</th><th>Total<br />Deaths</th>\n    </tr></thead>`,\n  },\n  hospitalizations: {\n    name: \"hospitalizations\",\n    title: \"Hospitalizations\",\n    url: `https://data.ca.gov/api/3/action/datastore_search_sql?sql=SELECT * from \"42d33765-20fd-44b8-a978-b083b7542225\"`,\n    thead: `<thead><tr><th>Date</th><th>Confirmed<br />Patients</th><th>Suspected<br />Patients</th><th>Total<br />Patients</th><th>All<br />Beds</th><th>ICU<br />Confirmed<br />Patients</th><th>ICU<br />Suspected<br />Patients</th><th>ICU<br />Avail<br />Beds</th></tr></thead>`,\n  },\n  homeless: {\n    name: \"homeless\",\n    title: \"Homeless Impact\",\n    url: `https://data.ca.gov/api/3/action/datastore_search_sql?sql=SELECT * from \"235466b6-0eb9-4ff7-a4b4-8138f474ce83\"`,\n    thead: `<thead><tr><th>Date</th><th>Rooms</th><th>Rooms<br />Occupied</th><th>Trailers<br />Requested</th><th>Trailers<br />Delivered</th><th>Donated<br />Trailers<br />Delivered</th>\n    </tr></thead>`,\n  },\n  surgeFac: {\n    name: \"surgeFac\",\n    title: \"Medical Surge Facilities\",\n    url: `https://data.ca.gov/api/3/action/datastore_search_sql?sql=SELECT * from \"ef6675e7-cd3a-4762-ba75-2ef78d6dc334\"`,\n    thead: `<thead><tr><th>Date</th><th>Type of<br />Facility</th><th>Status</th><th>Beds Ready<br />for Patients</th><th>Patients<br />in Beds</th><th>Beds in<br />Warm Status</th>\n    </tr></thead>`,\n  },\n};\n\nexport default charts;\n","//  to do: make it so county stays when selecting a different category\nimport React, { useState, memo } from \"react\";\nimport { ComposableMap, Geographies, Geography } from \"react-simple-maps\";\nimport CountyInfo from \"./CountyInfo\";\nimport charts from \"./charts\";\n\nconst geoUrl =\n  \"https://raw.githubusercontent.com/deldersveld/topojson/master/countries/us-states/CA-06-california-counties.json\";\n\nconst MapChart = ({ setTooltipContent }) => {\n  const [chart, setChart] = useState(charts[\"cases\"]);\n  const [countyInfo, setCountyInfo] = useState(null);\n\n  const handleClickCounty = (county) => {\n    const url = `${chart.url} WHERE \"county\" LIKE '${county}%'`;\n    console.log(\"url: \", url);\n    fetch(url)\n      .then((response) => response.json())\n      .then((data) => {\n        //  this sorts correctly in firefox, not in chrome or safari\n        const sortedData = data.result.records.sort((a, b) => {\n          if (b.date > a.date) return 1;\n          if (a.date > b.date) return 1;\n          return 0;\n        });\n        const info = {\n          county: county,\n          records: sortedData,\n        };\n        setCountyInfo(info);\n      });\n  };\n\n  return (\n    <>\n      {console.log(countyInfo)}\n      <div class=\"button-row\">\n        <div\n          class=\"button\"\n          onClick={() => {\n            setCountyInfo(null);\n            setChart(charts[\"cases\"]);\n          }}\n        >\n          Cases\n        </div>\n        <div\n          class=\"button\"\n          onClick={() => {\n            setCountyInfo(null);\n            setChart(charts[\"hospitalizations\"]);\n          }}\n        >\n          Hospitalizations\n        </div>\n        <div\n          class=\"button\"\n          onClick={() => {\n            setCountyInfo(null);\n            setChart(charts[\"homeless\"]);\n          }}\n        >\n          Homeless\n        </div>\n        <div\n          class=\"button\"\n          onClick={() => {\n            setCountyInfo(null);\n            setChart(charts[\"surgeFac\"]);\n          }}\n        >\n          Medical Surge Facilities\n        </div>\n      </div>\n      <h2>COVID-19 {chart.title}</h2>\n      <p style={{ fontSize: \".7rem\" }}>Click county for stats</p>\n      <div className=\"map\">\n        <ComposableMap\n          data-tip=\"\"\n          projection=\"geoAzimuthalEqualArea\"\n          projectionConfig={{\n            rotate: [122, -30, 0],\n            scale: 1200,\n          }}\n          width={400}\n          height={500}\n          style={{\n            width: \"auto\",\n            height: \"50%\",\n          }}\n        >\n          <Geographies geography={geoUrl}>\n            {({ geographies }) =>\n              geographies.map((geo) => (\n                <Geography\n                  key={geo.rsmKey}\n                  geography={geo}\n                  fill=\"#D6D6DA\"\n                  stroke=\"#FFF\"\n                  strokeWidth=\".5px\"\n                  onMouseEnter={() => {\n                    const { NAME } = geo.properties;\n                    setTooltipContent(`${NAME}`);\n                  }}\n                  onMouseLeave={() => {\n                    setTooltipContent(\"\");\n                  }}\n                  onClick={() => handleClickCounty(geo.properties.NAME)}\n                  style={{\n                    default: {\n                      fill: \"#D6D6DA\",\n                      outline: \"none\",\n                    },\n                    hover: {\n                      fill: \"#776274\",\n                      outline: \"none\",\n                    },\n                    pressed: {\n                      fill: \"#5a5353\",\n                      outline: \"none\",\n                    },\n                  }}\n                />\n              ))\n            }\n          </Geographies>\n        </ComposableMap>\n      </div>\n\n      <CountyInfo chart={chart} countyInfo={countyInfo} />\n    </>\n  );\n};\n\nexport default memo(MapChart);\n\n/*\n\n*/\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ReactTooltip from \"react-tooltip\";\n\nimport \"./styles.css\";\n\nimport MapChart from \"./MapChart\";\n\nfunction App() {\n  const [content, setContent] = useState(\"\");\n  return (\n    <div>\n      <MapChart setTooltipContent={setContent} />\n      <ReactTooltip>{content}</ReactTooltip>\n    </div>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}